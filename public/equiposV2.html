<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Interface Adorable</title>
    <link rel="stylesheet" href="css/CHAT 6.0.CSS">
    <link rel="stylesheet" href="css/equipos.css">


    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=person_search" />
</head>

<body>



    <div class="chat-container">
        <div class="sidebar">
            <div id="right-button" class="right-button">
                <span class="icon2 material-symbols-outlined" style="font-size: 50px; width: 60px; height: 60px;">
                    person_search
                </span>
            </div>
            <div id="contact-list" class="contacts">
                <div class="contact-item">
                    <img src="Images/profile1.jpg" alt="Liam Brown">
                    Liam
                </div>
                <div class="contact-item">
                    <img src="Images/profile2.jpg" alt="Emily Jonson">
                    Emily Jonson
                </div>
                <div class="contact-item">
                    <img src="Images/profile3.jpg" alt="Sophia Martinez">
                    Sophia Martinez
                </div>
                <div class="contact-item">
                    <img src="Images/profile4.jpg" alt="Noah Wilson">
                    Noah Wilson
                </div>
            </div>
            <a href="chat.html">
                <div class="separator"></div>
                <div class="menu">
                    <div class="menu-item">
                        <span class="icon">🏠</span>
                        Inicio
                    </div>
            </a>
            <a href="equiposV2.html">
                <div class="menu-item">
                    <span class="icon">👥</span>
                    Grupos
                </div>
            </a>
            <div class="menu-item">
                <span class="icon">👤</span>
                Perfil
            </div>
            <div class="menu-item" id="rewards">
                <span class="icon">🏆</span>
                Recompensas
            </div>
        </div>
        <div class="menu-item">
            <p id="current-user">Usuario actual</p>
        </div>
        <div class="menu-item" id="logout">
            <span class="icon">🚪</span>
            Cerrar Sesión
        </div>

    </div>
    <div class="chat-content">
        <div class="chat-header">
            <div id="contact-name" class="chat-title">
                Mis Grupos
            </div>
        </div>
        <div id="EquiposUsuarios">

            <!-- GRUPOS -->
            <div id="grupos">
            </div>
            <!-- Botón para Crear Grupo -->

            <div id="create-group">

                <button id="toggle-form" onclick="mostrarFormulario()">Crear Nuevo Grupo</button>

                <form id="group-form" style="display: none;">

                    <label for="group-name">Nombre del Grupo:</label>
                    <input type="text" id="group-name" placeholder="Nombre del grupo" required><br>

                    <label for="group-description">Descripción:</label>
                    <textarea id="group-description" rows="2" placeholder="Descripción del grupo"
                        required></textarea><br>

                    <label for="user-search">Buscar miembros: (*correo electrónico)</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="user-search" placeholder="Buscar usuarios">
                        <button type="button" onclick="agregarUsuario()">Agregar</button>
                    </div><br>
                    <div id="search-results2">

                    </div>

                    <!-- Lista de miembros seleccionados -->
                    <h3>Miembros seleccionados:</h3>
                    <ul id="selected-users"></ul>

                    <button type="submit">Crear Grupo</button>
                </form>
            </div>
        </div>
    </div>
    <div id="right-menu" class="right-menu">
        <div class="right-title">
            <h2>Buscar Usuarios</h2>
        </div>
        <div class="search-bar">
            <input id="search-input" type="text" placeholder="Buscar contacto...">
            <div class="search-results" id="search-results">
            </div>
        </div>
    </div>
    </div>
    <script type="module" src="socket.io/socket.io.js"></script>
    <script type="module" src="js/session.js"></script>
    <script type="module" src="js/listUsers.js"></script>
    <script src="js/crearGrupo.js"></script>
    <script>

        document.getElementById('logout').addEventListener('click', () => {

            console.log('hola');
            fetch('/logout', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        window.location.href = '/';
                    } else {
                        console.error('Error al cerrar sesión:', data.message);
                    }
                });
        })
    </script>
</body>

</html>